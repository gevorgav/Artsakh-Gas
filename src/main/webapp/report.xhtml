<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html >
<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
>
<h:head>
    <link href="images/favicon.png" rel="shortcut icon"
          type="image/x-icon"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Անալիտիկ</title>
    <meta name="description" content="Admin, Dashboard, Bootstrap, Bootstrap 4, Angular, AngularJS"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

    <!-- for ios 7 style, multi-resolution icon of 152x152 -->
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-barstyle" content="black-translucent"/>
    <link rel="apple-touch-icon" href="assets/images/logo.png"/>
    <meta name="apple-mobile-web-app-title" content="Flatkit"/>
    <!-- for Chrome on Android, multi-resolution icon of 196x196 -->
    <meta name="mobile-web-app-capable" content="yes"/>
    <link rel="shortcut icon" sizes="196x196" href="assets/images/logo.png"/>

    <!-- style -->
    <link rel="stylesheet" href="assets/animate.css/animate.min.css" type="text/css"/>
    <link rel="stylesheet" href="assets/glyphicons/glyphicons.css" type="text/css"/>
    <link rel="stylesheet" href="assets/font-awesome/css/font-awesome.min.css" type="text/css"/>
    <link rel="stylesheet" href="assets/material-design-icons/material-design-icons.css" type="text/css"/>

    <link rel="stylesheet" href="assets/bootstrap/dist/css/bootstrap.min.css" type="text/css"/>
    <!-- build:css assets/styles/app.min.css -->
    <link rel="stylesheet" href="assets/styles/app.css" type="text/css"/>
    <!-- endbuild -->
    <link rel="stylesheet" href="assets/styles/font.css" type="text/css"/>
    <link rel="stylesheet" href="resources/main/ui/style.css" />

</h:head>
<h:body>

    <!--Authorisation-->
    <div class="" id="login-page">
        <div class="container">
            <div class="center-align">
                <f:metadata>
                    <f:event type="preRenderView" listener="#{authorisationUtil.onLoad}"/>
                </f:metadata>
            </div>
        </div>
    </div>

    <style>
        .ui-growl {
            right: 30px;
            top: 15%;
        }
    </style>
    <div class="app" id="app">
        <!-- ############ LAYOUT START-->

        <!-- aside -->
        <div id="aside" class="app-aside modal fade folded md show-text nav-dropdown">
            <div class="left navside black dk" layout="column">
                <div class="navbar no-radius">
                    <!-- brand -->
                    <a class="navbar-brand">
                        <div ui-include="'assets/images/logo.svg'"></div>
                        <img src="assets/images/logo.png" alt="." class="hide"></img>
                        <span class="hidden-folded inline">Արցախ Գազ</span>
                    </a>
                    <!-- / brand -->
                </div>
                <div flex="" class="hide-scroll">
                    <nav class="scroll nav-active-primary">

                        <ul class="nav" ui-nav="">

                            <!--<li>-->
                                <!--<a href="index.xhtml">-->
                    <!--<span class="nav-icon">-->
                      <!--<i class="material-icons">&#xe3fc;-->
                        <!--<span ui-include="'assets/images/i_0.svg'"></span>-->
                      <!--</i>-->
                    <!--</span>-->
                                    <!--<span class="nav-text">Վահանակ</span>-->
                                <!--</a>-->
                            <!--</li>-->

                            <h:panelGroup rendered="#{dashboardForm.admin}">
                                <li>
                                    <a href="portfolio.xhtml">
                            <span class="nav-icon">
                              <i class="material-icons">&#xe896;
                                <span ui-include="'assets/images/i_7.svg'"></span>
                              </i>
                            </span>
                                        <span class="nav-text">Թղթապանակ</span>
                                    </a>
                                </li>
                            </h:panelGroup>

                            <li>
                                <a>
                    <span class="nav-caret">
                      <i class="fa fa-caret-down"></i>
                    </span>
                                    <span class="nav-icon">
                      <i class="material-icons">&#xe1b8;
                        <span ui-include="'assets/images/i_8.svg'"></span>
                      </i>
                    </span>
                                    <span class="nav-text">Հաշվետվություն</span>
                                </a>
                                <ul class="nav-sub">
                                    <li>
                                        <a href="report.xhtml">
                                            <span class="nav-text">Մուծման </span>
                                        </a>
                                    </li>
                                    <!--<li>-->
                                        <!--<a href="financialChart.xhtml">-->
                                            <!--<span class="nav-text">ֆինանսական դիագրամ</span>-->
                                        <!--</a>-->
                                    <!--</li>-->
                                    <!--<li>-->
                                        <!--<a href="touristChart.xhtml">-->
                                            <!--<span class="nav-text">Զբոսաշրջիկների թվի դիագրամ</span>-->
                                        <!--</a>-->
                                    <!--</li>-->
                                </ul>
                            </li>

                            <!--<li>-->
                                <!--<a>-->
                    <!--<span class="nav-caret">-->
                      <!--<i class="fa fa-caret-down"></i>-->
                    <!--</span>-->
                                    <!--<span class="nav-icon">-->
                       <!--<i class="material-icons">&#xE865;-->
                        <!--<span ui-include="'assets/images/i_3.svg'"></span>-->
                      <!--</i>-->
                    <!--</span>-->
                                    <!--<span class="nav-text">Կարգավորումներ</span>-->
                                <!--</a>-->
                                <!--<ul class="nav-sub">-->
                                    <!--<li>-->
                                        <!--<a href="hotels.xhtml">-->
                                            <!--<span class="nav-text">Հյուրանոցներ</span>-->
                                        <!--</a>-->
                                    <!--</li>-->
                                    <!--<li>-->
                                        <!--<a href="restaurant.xhtml">-->
                                            <!--<span class="nav-text">Ռեստորաններ</span>-->
                                        <!--</a>-->
                                    <!--</li>-->
                                    <!--<li>-->
                                        <!--<a href="museum.xhtml">-->
                                            <!--<span class="nav-text">Թանգարան</span>-->
                                        <!--</a>-->
                                    <!--</li>-->
                                    <!--<li>-->
                                        <!--<a href="tourOperator.xhtml">-->
                                            <!--<span class="nav-text">Տուր օպերատորներ</span>-->
                                        <!--</a>-->
                                    <!--</li>-->
                                    <!--<li>-->
                                        <!--<a href="touristSight.xhtml">-->
                                            <!--<span class="nav-text">Տեսարժան վայրեր</span>-->
                                        <!--</a>-->
                                    <!--</li>-->
                                <!--</ul>-->
                            <!--</li>-->
                            <h:panelGroup rendered="#{loginForm.user.admin}">
                                <li>
                                    <a href="settings.xhtml">
                            <span class="nav-icon">
                              <i class="material-icons">&#xe896;
                                <span ui-include="'assets/images/i_7.svg'"></span>
                              </i>
                            </span>
                                        <span class="nav-text">Կարգավորումներ</span>
                                    </a>
                                </li>
                            </h:panelGroup>

                            <li>
                                <a href="#">
                    <span class="nav-icon">
                      <i class="material-icons">&#xE88F;
                        <span ui-include="'assets/images/info.svg'"></span>
                      </i>
                    </span>
                                    <span class="nav-text">Օգնություն</span>
                                </a>
                            </li>

                        </ul>
                    </nav>
                </div>
            </div>
        </div>
        <!-- / -->

        <!-- content -->
        <div id="content" class="app-content box-shadow-z0" role="main">
            <!--<div class="app-footer">
                <div class="p-a text-xs">
                    <div class="pull-right text-muted">
                        Պատճերաշնորհ <strong>Տուրիզմ</strong>
                        <a ui-scroll-to="content"><i class="fa fa-long-arrow-up p-x-sm"></i></a>
                    </div>
                    <div class="nav">
                        <a class="nav-link" href=""></a>
                    </div>
                </div>
            </div>-->
            <h:form id="portfolioForm" prependId="false">
                <p:ajaxStatus id="ajaxShadowId">
                    <f:facet id="startFacet1Id" name="start">
                        <div class="ui-widget-overlay position-style" id="shadow">
                            <h:graphicImage alt="start" id="ajaxLoader2ID" value="resources/main/ui/images/loading.gif" styleClass="loader"/>
                        </div>
                    </f:facet>

                    <f:facet id="completeFacetId" name="complete">
                        <h:outputText id="emptyTextId" value=""/>
                    </f:facet>
                </p:ajaxStatus>
                <div ui-view="" class="app-body" id="view">

                    <!-- ############ PAGE START-->
                    <h:panelGroup id="savePanelId" layout="block" class="app-header white box-shadow">
                        <div class="float-right" style="margin-right: 105px">
                        </div>
                        <c:if test="#{!authorisationUtil.authorisedUser}">
                            <div class="de-btn-top">
                                <h:commandLink immediate="true" value="Մուտք" styleClass="btn "
                                               actionListener="#{authorisationUtil.signIn}"/>
                            </div>
                        </c:if>
                        <c:if test="#{authorisationUtil.authorisedUser}">
                            <div class="de-btn-top">
                                <h:commandLink immediate="true" value="Դուրս գալ" styleClass="btn "
                                               actionListener="#{authorisationUtil.signout}"/>
                            </div>
                        </c:if>
                        <div style="margin-top: 50px;" id="growId">
                            <p:growl id="growl" sticky="false"/>
                        </div>


                    </h:panelGroup>
                    <div class="app-body">
                        <div class="padding">
                            <div class="box form-border">
                                <div class="box-body">
                                    <h:panelGroup id="yearlyPanelId">

                                        <h:panelGrid columns="4" cellpadding="5">
                                            <p:commandButton id="graficButtonId" value="Ստեղծել Գրաֆիկ" styleClass="dark"  oncomplete="PF('graficDialog').show();">
                                            </p:commandButton>
                                            <p:commandButton value="Ավելացնել ֆիլտր" styleClass="dark" action="#{portfolioForm.openFilterDialog}" process="@this" update="filterDialogId"/>
                                            <p:commandButton value="Ջնջել ֆիլտրը" styleClass="dark" actionListener="#{portfolioForm.removeFilter}" oncomplete="PF('reportClientTable').filter()"/>
                                            <div class="row">
                                                <div class="col-sm-4 col-md-4">
                                                    <p:selectOneMenu id="semiAnnualId" styleClass="form-control input-c" value="#{portfolioForm.currentSemiAnnualId}">
                                                        <f:converter converterId="javax.faces.Integer" />
                                                        <f:selectItems value="#{portfolioForm.cache.semiAnnuals}" var="semiAnnual" itemLabel="#{semiAnnual.name}" itemValue="#{semiAnnual.id}"/>
                                                        <p:ajax event="change" process="@this" oncomplete="PF('reportClientTable').filter()"  />
                                                    </p:selectOneMenu>
                                                </div>
                                            </div>
                                        </h:panelGrid>
                                        <div class="clear"></div>
                                        <p:remoteCommand name="onload" oncomplete="PF('reportClientTable').filter()" autoRun="true"/>
                                        <h:panelGroup layout="block" class="de-table-block" id="table2">
                                            <p:dataTable var="client"
                                                         id="clientReportTableId"
                                                         value="#{portfolioForm.clients}"
                                                         widgetVar="reportClientTable"
                                                         styleClass="table table-hover b-t de-table"
                                                         emptyMessage="Չկա տվյալններ"
                                                         filteredValue="#{portfolioForm.customFilteredClients}"
                                                         paginator="true"
                                                         rows="20"
                                                         selection="#{portfolioForm.selectedClients}"
                                                         rowKey="#{client.id}"
                                                         paginatorTemplate="{FirstPageLink} {PreviousPageLink} {RowsPerPageDropdown} {NextPageLink} {LastPageLink}"
                                                         rowsPerPageTemplate="10,20,50"
                                                         style="margin-bottom:0">

                                                <f:facet name="header">
                                                    <p:commandButton id="toggler" type="button" value="Սյունակներ" style="float:right" />
                                                    <p:columnToggler datasource="clientReportTableId" trigger="toggler" />

                                                    <h:commandButton id="excel" value="Արտահանում excel">
                                                        <p:dataExporter type="xlsx" target="clientReportTableId" fileName="clients" />
                                                    </h:commandButton>
                                                </f:facet>

                                                <p:column selectionMode="multiple" style="width:35px;text-align:center"/>

                                                <p:column filterBy="#{client.id}" headerText="ԲՀ" style="width: 10%"  filterMatchMode="contains">
                                                    <h:outputText value="#{client.id}" />
                                                </p:column>

                                                <p:column filterBy="#{client.company}" style="width: 10%"  headerText="Կազմ է" filterMatchMode="equals">
                                                    <f:facet name="filter">
                                                        <p:selectBooleanCheckbox label="company" onchange="PF('reportClientTable').filter()" panelStyle="" scrollHeight="150">
                                                            <f:selectItem value="0" itemLabel="Այո"/>
                                                            <f:selectItem value="1" itemLabel="Ոչ" />
                                                        </p:selectBooleanCheckbox>
                                                    </f:facet>
                                                    <h:outputText value="#{client.company ? 'Այո' : 'Ոչ'}" />
                                                </p:column>

                                                <p:column filterBy="#{client.firstName}" headerText="Անուն" style="width: 10%"  filterMatchMode="contains">
                                                    <h:outputText value="#{client.firstName}" />
                                                </p:column>
                                                <p:column filterBy="#{client.lastName}" headerText="Ազգանուն" style="width: 10%"  filterMatchMode="contains">
                                                    <h:outputText value="#{client.lastName}" />
                                                </p:column>
                                                <p:column filterBy="#{client.clientHistory.paid}" style="width: 10%" headerText="Վճարման վիճակ" filterMatchMode="equals">
                                                    <f:facet name="filter">
                                                        <p:selectOneMenu  label="Colors" onchange="PF('reportClientTable').filter()"  panelStyle="width:125px" scrollHeight="150">
                                                            <f:converter converterId="javax.faces.Boolean" />
                                                            <f:selectItem itemLabel="Բոլոր" itemValue="" />
                                                            <f:selectItem itemLabel="Վճարված" itemValue="true" />
                                                            <f:selectItem itemLabel="Չվճարված" itemValue="false" />
                                                        </p:selectOneMenu>
                                                    </f:facet>
                                                    <h:outputText value="#{client.clientHistory.paid ? 'Վճարված': 'Չվճարված'}" />
                                                </p:column>

                                                <p:column filterBy="#{client.clientHistory.visitType}" style="width: 10%" headerText="Այցելություն" filterMatchMode="equals">
                                                    <f:facet name="filter">
                                                        <p:selectOneMenu  label="Այցելություն" onchange="PF('reportClientTable').filter()"  panelStyle="width:125px" scrollHeight="150">
                                                            <f:converter converterId="javax.faces.Integer" />
                                                            <f:selectItem itemLabel="Բոլոր" itemValue="" />
                                                            <f:selectItems value="#{portfolioForm.cache.visitTypes}" var="visitType" itemLabel="#{visitType.name}" itemValue="#{visitType.id}"/>
                                                        </p:selectOneMenu>
                                                    </f:facet>
                                                    <h:outputText value="#{portfolioForm.getVisitType(client.clientHistory.visitType) != null ? portfolioForm.getVisitType(client.clientHistory.visitType).name : ''}"></h:outputText>
                                                </p:column>

                                                <p:column filterBy="#{client.clientHistory.risk}" style="width: 10%" headerText="Ռիսկ" filterMatchMode="contains">
                                                    <h:outputText value="#{client.clientHistory.risk}"></h:outputText>
                                                </p:column>

                                                <p:column filterBy="#{client.debt}" style="width: 10%" headerText="Պարտք" filterMatchMode="contains">
                                                    <h:outputText value="#{client.debt}"></h:outputText>
                                                </p:column>

                                                <p:column filterBy="#{client.pay}" style="width: 10%" headerText="Մուծած" filterMatchMode="contains">
                                                    <h:outputText value="#{client.pay}"></h:outputText>
                                                </p:column>

                                            </p:dataTable>

                                        </h:panelGroup>
                                    </h:panelGroup>


                                    <div class="clear"></div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </h:form>

            <ui:include src="dialogs/filter.xhtml" />
            <ui:include src="dialogs/grafic.xhtml" />

        </div>
        <!-- ############ PAGE END-->
        <!-- / -->

    </div>

    <!-- build:js scripts/app.html.js -->
    <!-- jQuery -->
    <script type="text/javascript" src="javax.faces.resource/jquery/jquery.js.xhtml?ln=primefaces&amp;v=6.0"></script>
    <script type="text/javascript"
            src="javax.faces.resource/jquery/jquery-plugins.js.xhtml?ln=primefaces&amp;v=6.0"></script>
    <script type="text/javascript" src="javax.faces.resource/core.js.xhtml?ln=primefaces&amp;v=6.0"></script>
    <script type="text/javascript" src="javax.faces.resource/components.js.xhtml?ln=primefaces&amp;v=6.0"></script>
    <script type="text/javascript"
            src="javax.faces.resource/inputnumber/inputnumber.js.xhtml?ln=primefaces&amp;v=6.0"></script>
    <!-- Bootstrap -->
    <script src="libs/jquery/tether/dist/js/tether.min.js"></script>
    <script src="libs/jquery/bootstrap/dist/js/bootstrap.js"></script>
    <!-- core -->
    <script src="libs/jquery/underscore/underscore-min.js"></script>
    <script src="libs/jquery/jQuery-Storage-API/jquery.storageapi.min.js"></script>
    <script src="libs/jquery/PACE/pace.min.js"></script>

    <script src="scripts/config.lazyload.js"></script>

    <script src="scripts/palette.js"></script>
    <script src="scripts/ui-load.js"></script>
    <script src="scripts/ui-jp.js"></script>
    <script src="scripts/ui-include.js"></script>
    <script src="scripts/ui-device.js"></script>
    <script src="scripts/ui-form.js"></script>
    <script src="scripts/ui-nav.js"></script>
    <script src="scripts/ui-screenfull.js"></script>
    <script src="scripts/ui-scroll-to.js"></script>
    <script src="scripts/ui-toggle-class.js"></script>

    <script src="scripts/app.js"></script>
    <script src="scripts/utility.js"></script>

    <!-- ajax -->
    <!--<script src="libs/jquery/jquery-pjax/jquery.pjax.js"></script>-->
    <!--<script src="scripts/ajax.js"></script>-->
    <!-- endbuild -->

</h:body>
</html>